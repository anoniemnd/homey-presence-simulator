<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Presence Simulator Settings</title>
  <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
  <link rel="stylesheet" href="./css/styles.css">
</head>

<body>

  <h1>Presence Simulator Settings</h1>

  <div id="statusMessage" class="status"></div>

  <!-- Confirm Modal -->
  <div id="confirmModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-title" id="modalTitle">Confirm</div>
      <div class="modal-message" id="modalMessage"></div>
      <div class="modal-buttons">
        <button class="secondary" onclick="closeModal(false)">Cancel</button>
        <button onclick="closeModal(true)">Confirm</button>
      </div>
    </div>
  </div>

  <!-- All Events Modal -->
  <div id="eventsModal" class="modal-overlay">
    <div class="modal-content modal-large">
      <div class="modal-title" id="eventsModalTitle">All Events</div>
      <div id="eventsModalContent" class="events-modal-content"></div>
      <div class="modal-buttons">
        <button onclick="closeEventsModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- Vacation Mode Toggle -->
  <div class="card">
    <h2>ğŸ¯ Presence Simulator</h2>
    <div class="info-box">
      Enable Presence Simulator to start replaying recorded patterns
    </div>
    <label class="toggle-label">
      <label class="switch">
        <input type="checkbox" id="vacationMode" onchange="toggleVacationMode()">
        <span class="slider"></span>
      </label>
      <span class="status-text">Simulator is <span id="vacationStatus">OFF</span></span>
    </label>
  </div>

  <!-- Add Devices -->
  <div class="card">
    <h2>â• Add Devices to Track</h2>
    <div class="info-box">
      Select one or more devices to start tracking their on/off patterns
    </div>
    <div id="deviceSelectorList" class="device-selector-list"></div>
    <button onclick="addSelectedDevices()">Add Selected Devices (<span id="selectedCount">0</span>)</button>
  </div>

  <!-- Tracked Devices -->
  <div class="card">
    <h2>ğŸ“± Tracked Devices</h2>
    <div id="trackedDevices" class="device-list">
      <p class="text-muted">No devices tracked yet</p>
    </div>
  </div>

  <!-- Debug Section -->
  <div id="debugSection" class="debug-section" style="display: none;">
    <div class="card">
      <h2>ğŸ› Debug Tools</h2>
      <div class="info-box">
        Development tools for troubleshooting
      </div>
      <button onclick="viewAllEventsDebug()">View All Events</button>
      <button onclick="exportData()" class="secondary">Export Data</button>
      <div id="debugOutput" style="margin-top: 15px;"></div>
    </div>

    <div class="card">
      <h2>ğŸ“ Application Logs</h2>
      <div class="info-box">
        View real-time application logs for debugging
      </div>
      <div class="log-controls">
        <button onclick="viewLogs()">Refresh Logs</button>
        <button onclick="toggleAutoRefresh()" id="autoRefreshBtn" class="secondary">Enable Auto-refresh</button>
        <button onclick="clearLogDisplay()" class="secondary">Clear Display</button>
        <button onclick="copyLogs()" class="secondary">Copy Logs</button>
      </div>
      <div id="logViewer" class="log-viewer" style="display: none;"></div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="./js/utils.js"></script>
  <script src="./js/modals.js"></script>
  <script src="./js/settings.js"></script>
  <script src="./js/device-selector.js"></script>
  <script src="./js/tracked-devices.js"></script>
  <script src="./js/test-data.js"></script>
  <script src="./js/debug.js"></script>
  <script src="./js/app.js"></script>

</body>

</html>